<div class="row">
  <div *ngIf="ticket" [formGroup]="form" class="col">
    <div *ngFor="let field of ticket.ticketFieldConfigurationBeforeStandard">
      <app-additional-field [field]="field" [ticketUUID]="ticket.uuid" [form]="getAdditional(form)" [ticketAcquired]="ticket.acquired"></app-additional-field>
    </div>

    <div class="form-row">
      <div class="col-12 col-md-6">
        <div class="form-group">
          <label [attr.for]="ticket.uuid + '-first-name'">{{'common.first-name' | translate}} *</label>
          <input [attr.id]="ticket.uuid + '-first-name'" formControlName="firstName" type="text" [ngClass]="{'form-control': ticket.locked !== true, 'form-control-plaintext': ticket.locked}" appInvalidFeedback [readonly]="ticket.locked === true">
        </div>
      </div>
      <div class="col-12 col-md-6">
        <div class="form-group">
          <label [attr.for]="ticket.uuid + '-last-name'">{{'common.last-name' | translate}} *</label>
          <input [attr.id]="ticket.uuid + '-last-name'" formControlName="lastName" type="text" [ngClass]="{'form-control': ticket.locked !== true, 'form-control-plaintext': ticket.locked}" appInvalidFeedback [readonly]="ticket.locked === true">
        </div>
      </div>
    </div>

    <div class="form-group">
      <label [attr.for]="ticket.uuid + '-email'">{{'common.email' | translate}} *</label>
      <input [attr.id]="ticket.uuid + '-email'" formControlName="email" type="email" [ngClass]="{'form-control': !emailEditForbidden, 'form-control-plaintext': emailEditForbidden}" appInvalidFeedback [readonly]="emailEditForbidden">
    </div>

    <div *ngFor="let field of ticket.ticketFieldConfigurationAfterStandard">
      <app-additional-field [field]="field" [ticketUUID]="ticket.uuid" [form]="getAdditional(form)" [ticketAcquired]="ticket.acquired"></app-additional-field>
    </div>

    <div class="form-group" *ngIf="purchaseContext && purchaseContext.contentLanguages.length > 1">
      <label [attr.for]="ticket.uuid + '-userLanguage'" translate="reservation-page-complete.language"></label>
      <select [attr.id]="ticket.uuid + '-userLanguage'" formControlName="userLanguage" class="custom-select" appInvalidFeedback>
        <option value=""></option>
        <option *ngFor="let lang of purchaseContext.contentLanguages" [ngValue]="lang.locale">{{lang.displayLanguage}}</option>
      </select>
    </div>
    <ng-container *ngIf="hasAdditionalServices">
      <ng-container *ngFor="let asw of additionalServices; let idx = index">
        <div class="h3 d-flex justify-content-between mt-4">
          <small class="text-muted">{{additionalServiceTitle(asw.title)}}</small>
          <div ngbDropdown class="d-inline-block" *ngIf="otherTickets">
            <button type="button" class="btn btn-sm btn-outline-primary" [id]="'switchItem_' + asw.itemId" ngbDropdownToggle>{{'reservation-page.move-additional-service' | translate}}</button>
            <div ngbDropdownMenu [attr.aria-labelledby]="'switchItem_' + asw.itemId">
              <button type="button" ngbDropdownItem *ngFor="let tkt of otherTickets" (click)="moveAdditionalServiceItem(idx, asw, tkt)">
                <span>{{' '}}{{'reservation-page-complete.ticket-nr' | translate}}{{tkt.index}} - {{tkt.categoryName}}</span>
              </button>
            </div>
          </div>
        </div>
        <div *ngFor="let field of asw.ticketFieldConfiguration">
          <app-additional-field [field]="field" [ticketUUID]="ticket.uuid" [form]="getAdditionalServiceForm(idx)" [ticketAcquired]="ticket.acquired"></app-additional-field>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
