<div class="page-header wMarginTop"><h2 translate="reservation-page.payment"></h2></div>

<div *ngIf="activePaymentsCount > 1" class="row">
    <div class="col-12" [class.col-md-5]="verticalLayout" [formGroup]="overviewForm">
        <div *ngIf="verticalLayout" class="mb-md-4">
            <div *ngFor="let method of sortedAvailablePaymentMethods" class="custom-control custom-radio pt-3 pb-3" 
                [ngClass]="{ 'font-weight-bold border-top border-bottom': selectedPaymentMethod == method, 'text-muted border-right-md': selectedPaymentMethod != null && selectedPaymentMethod != method }">
                <input class="custom-control-input" [attr.id]="method" type="radio" [value]="method" formControlName="selectedPaymentMethod">
                <label class="custom-control-label w-100 h-100" [attr.for]="method"><fa-icon [icon]="getPaymentMethodDetails(method).icon" class="ml-2 mr-3"></fa-icon> {{ getPaymentMethodDetails(method).labelKey | translate }}</label>
            </div>
        </div>
        <div class="btn-group btn-group-toggle payment-method-selector mb-2 w-100" *ngIf="!verticalLayout">
            <label class="btn btn-outline-dark" *ngFor="let method of sortedAvailablePaymentMethods" [class.active]="selectedPaymentMethod == method">
                <input type="radio" formControlName="selectedPaymentMethod" [value]="method">
                <fa-icon [icon]="getPaymentMethodDetails(method).icon"></fa-icon> {{ getPaymentMethodDetails(method).labelKey | translate }}
            </label>
        </div>
    </div>
    <div class="col-12" [class.col-md-7]="verticalLayout">
        <div *ngIf="!selectedPaymentMethod" class="text-muted text-center" [ngClass]="{'h-100 d-flex flex-md-column justify-content-center': verticalLayout }" translate="reservation-page.payment.select-method"></div>
        <div *ngIf="selectedPaymentMethod" [ngClass]="{'h-100 d-flex flex-md-column justify-content-center': verticalLayout }">
            <app-offline-payment-proxy
                [proxy]="selectedPaymentProxy"
                [method]="selectedPaymentMethod"
                [parameters]="activePaymentMethods[selectedPaymentMethod].parameters"
                [overviewForm]="overviewForm"
                (paymentProvider)="registerCurrentPaymentProvider($event)">
            </app-offline-payment-proxy>
            <app-onsite-payment-proxy
                [proxy]="selectedPaymentProxy"
                [method]="selectedPaymentMethod"
                [parameters]="activePaymentMethods[selectedPaymentMethod].parameters"
                [overviewForm]="overviewForm"
                (paymentProvider)="registerCurrentPaymentProvider($event)">
            </app-onsite-payment-proxy>
            <app-stripe-payment-proxy
                [event]="event"
                [reservation]="reservationInfo"
                [proxy]="selectedPaymentProxy"
                [method]="selectedPaymentMethod"
                [parameters]="activePaymentMethods[selectedPaymentMethod].parameters"
                (paymentProvider)="registerCurrentPaymentProvider($event)">
            </app-stripe-payment-proxy>
            <app-paypal-payment-proxy
                [proxy]="selectedPaymentProxy"
                [method]="selectedPaymentMethod"
                [reservation]="reservationInfo"
                (paymentProvider)="registerCurrentPaymentProvider($event)">
            </app-paypal-payment-proxy>
            <app-mollie-payment-proxy
                [proxy]="selectedPaymentProxy"
                [method]="selectedPaymentMethod"
                (paymentProvider)="registerCurrentPaymentProvider($event)">
            </app-mollie-payment-proxy>
        </div>
        
    </div>
</div>

<div *ngIf="activePaymentsCount == 1"></div>


